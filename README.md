# 介绍
Bustub是卡内基梅隆大学CMU 15-445的课程Lab，该Lab是在一个基础的框架上实现储存引擎的各项主要功能。
## Lab1 Buffer Pool
第一个Lab为存储引擎实现缓冲池（Buffer Pool）。缓冲池负责将物理页面从主内存来回移动到磁盘。它允许 DBMS 支持大于系统可用内存量的数据库。缓冲池的操作对系统中的其他部分是透明的，系统使用其唯一标识符 （page_id_t）向缓冲池请求页面。
#### 技术点
* 使用互斥锁保证缓冲池的线程安全性。
* 使用LRU的缓存替换策略，以减少磁盘IO次数，提高性能。
## Lab2 Indnx
第二个Lab是为储存引擎实现一个索引。索引负责快速数据检索，无需搜索数据库表中的每一行，为快速随机查找和高效访问有序记录提供基础。
#### 技术点
* 使用B+树为底层数据结构为储存引擎实现多级索引。
* 使用节点粒度的锁保证在多线程并发访问下的线程安全性。
* 采用沿访问路径加锁并且只锁住分支的方式以减小临界区，提高多线程下并发访问B+树索引的性能。
## Lab3 Concurrency Control
第三个Lab是为储存引擎实现并发控制系统。基本思路是实现一个锁管理器，然后用它来支持并发查询执行。锁管理器负责跟踪向事务发出的元组级锁，并支持基于隔离级别适当授予和释放的共享锁和排他锁。
#### 技术点
* 使用等待有向图在后台线程实现定时的死锁检测算法，以在发生死锁的两个事务间Abort开始时间晚的事务并回滚的方式打破死锁。
* 使用悲观的两阶段封锁并发控制协议实现了常见的三种隔离级别READ_UNCOMMITED、READ_COMMITTED 和 REPEATABLE_READ。

## Lab4 Logging & Recovery
第四个Lab是储存引擎实现日志记录和恢复系统。在No-Force/Steal缓冲策略下实现先写日志 (WAL)，并记录每个单独的页面级写入操作和事务命令。
#### 技术点
* 日志记录形式采用物理逻辑日志，并使用日志顺序号来保证物理逻辑redo操作时的幂等性。
* 设计日志缓冲区，将多条日志记录在缓冲区中，再用一次输出操作输出到稳定储存器中。避免每生成一条日志就将日志输出到储存器中，减小系统开销。
* 使用No-Force的策略，只需要等待该事务的提交日志输出到稳定储存器即可提交，而不必等待修改的数据全部输入到磁盘，这使得事务可以快速地提交。
* 按照WAL先写日志规则保证事务的原子性。
